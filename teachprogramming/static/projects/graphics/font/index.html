<!DOCTYPE html>
<html>
<head>
    <link id="favicon" rel="shortcut icon" type="image/png" href="data:image/png;base64,....==" />
    <title>Font</title>
    <style>
        .image_table td {
            width: 2em;
            height: 2em;
            border: 1px solid;
        }
    </style>
</head>
<body>

    <h1>Font Project</h1>

    <table class="image_table">
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>

    <img src="static/font.gif">

    <input type="text" id="hex_input">
    <div id="out"></div>


<script type="module">
    const nonHexRegex = new RegExp('[^0-9a-f]+', 'gi')
    export function cleanHexString(hex_string) {return hex_string.toLowerCase().replaceAll(nonHexRegex, "")}
    export function* hexToBytes(hex) {
        console.assert(hex.length % 2 == 0, "hex_string must have length devisable by 2")
        for (let c = 0; c < hex.length; c += 2) {
            yield parseInt(hex.substr(c, 2), 16)
        }
    }

    const hex_input = document.getElementById("hex_input")
    const tds = document.querySelectorAll(".image_table td")
    hex_input.addEventListener("input", (event)=>{
        for (let td of tds) {td.style=""}
        const data = [...hexToBytes(event.target.value)]
        for (let y=0 ; y<data.length ; y++) {
            for (let x=0 ; x<8 ; x++) {
                const td = tds[(y*8)+(7-x)]
                td.style = `background-color:${ (data[y] >> x) % 2 ? 'black':'white'}`
            }
        }
    })
</script>
</body>
</html>
